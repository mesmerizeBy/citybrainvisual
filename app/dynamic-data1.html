<!--
	THIS EXAMPLE WAS DOWNLOADED FROM https://echarts.apache.org/examples/zh/editor.html?c=dynamic-data2&random=xmcje86kyv&renderer=svg&code=PTSb8Z6M0ADlCo5RyuUfFdDxaYLnNAOpoELdC_iqwMP-A-3QT-1Abp0GmvAWACgBIGgMwFcA7AYwBcBLAe0YAIAnAIaMAJpwC2AEQGsBACgCUPAN4hAK_GA9tXTgAVgGdugHgtA8PrpUgO2McjAWICmBQCl6gKitACuqBwCxzhAb6aAX1JwA3AQAbehtACeUoaFRAEb9KGhpGTgB3HgBeHkYbZKlWG1kAagTkvJ5uGykAT3kAbli4gOCbVPqQnmKAWWkACwA6QRFxBR4AKh4ARgAGSfGeAFoeAFYpmuo6gT4eMXZGehyUwu6AcxtWNq2dm10FAB4JgH4AcnH7gqTD49PtnMv5AC59o5OZy-CmWcSoAXWuhszG4wj2rwBAGVobDvjdxg8ni9Em9WMiYSJvn8Ecd8aiQbUaHxjvQ-LwlJT4tYbD90q9WJxEaw-FsDgoADSM8FBEKsgDaQqoYv-xwAYvRAoEAJo2NYCtk4gFtbisTrqmWsbK5eQAXW62k4W1k92A93keQARDwHXlpSTWAAJTi0778zafGz8qEE4Rmi1W-4_O2ClZgjq63rekSyZo2eRCk2MgC-lJz1EpEJ4wmkAlSPDFJtBNELxZkACYyxWq8L1rWBABmRuVgtrIslgAsXebNZLAH0vqxh73CmWMllpMap-tShUyxNJssQKt1qxEpyUSIyw2RuvxkueKm13WpmfKbROOsU732GWzzwX1cxhv33k8ooGbGPAXtO9BiCkfSiJIJYKIybbdAADvQuh6tsYjVCAgASioAFOqAG6KgC0coAfKanpEZiMoWqF1ikABSiIAPIAHIIWsUKyDRDHdLo3K8uwtDlLIqHyOmsZUBR3SpmKowmik8Y9HwSbCPxoF1mJIo2BJJrAHWeQyb0QiQYMIzXlMMynuMQlgm2ymIchiliHW6HANh-FEVMJGMmRIFiO21F0Yx8HMbkbGMZxPKMAcPF8QJ5lxKh7YqQ06nSV0iZMApsXxSE6madpyUQQMiiGTeJk3tFNBtnF1koaB7YOU5hHEeY7nCeRoH9j57H-XwLFBRxXFhRFtmCYyqH9hlamSUlCZyaltmjeJknZTpeViAZPBGZMxVTKVVBtqNlWzbVuH1a5jWxnmVCUpw8EcNwZYAWCHCsIELLKEKOQAB6sKy9yAHPqgBAeoA5JqAIiBgDfPoA-36AOQGgC_ATMgB4KoACCr3NmMZgs9RwiKy91xEB_DsAcnRffcEwAKT3DGOMUzjbbivcBwCOwAhkzw9y0IEWwANZjN0o11mTLNs4wnOjN0AAc3RPPy_Mc1zozKbzmYUJTONZuTSs8AcPLCJjlBqzjz20F9zPtqTqu6zy-OG_c_Ymzrus8AARpwrAcmI33G2Ttu6wSMhbAAMgI9s2IErLciEnuUyrjIcpwgQcPBmMgKAgAXCYAYEqAHBygALxoAXJ6AGIWgCQ5oAzoo4GnSpuIAV4GAEAJ9iAAemBdvebRx8N9Ajvewuge8JF3CZHwnvQAgq3uja53rDlPBL33Bwtgd2CVC6PBbOsL7WwvVjYLIUkrK0EEUJCudcQ92C5QD23w-z6P4_famM9go7qVrOUADiAjx-W4z8sz66kyaKPrwv7BLxXmfWeG9Eghz4CEEAgBjuUABYRjhACIKinQAKWmAH6_PeyNGRQh5BccUjIgIASArPKwthvp0wZh3QhD0x4TwFjYChPAQGdCSIicoYhHbBx4NvQIUJVazyYX4GwfA-6MHYGIaQXBGBbx3oGW2s9qZ9hkHgngh9savUVgwsExCJ6s2lsLHm9Dz7UO-rQgx68mGJBYWwmOUjuEyPUXwzgAihEiLETdSRnDpG8IsiWVklklEqJoPg2RmjmTfR0YLLmYsJbBLiBfGhK9TFxFAZY9hNieExJoPwwRwjRHiO4GkuxlC4jyPKv43-gS1FFKZCQ5m4ShbdFlt0XmXjYlGOZiYlpNBkmsNSR42xnSqBZOcbktxBSBklIHP4xkCsD6gkpGIcoABhToaxWAcWOLRa6EjZBXTcdUSklIoSsAAJKMByHweosgGAsDcTwQYa8qAgEAFfKgBOU0ANBygAjdNAIAVusoGAEAPQAjDqABkInAgBuOUAIGRgAN-PAIAO_kXnmEAKbmgAEu2wDgQAUUYoAQIADeVAAIRoAWHNACFSoACzVADtwYAdP1YIlg4p0HirAKTCUstS2l9LvEyDishZl-yGUDiZQbFlxSxwTnAnpcQ2Q5Bcq3HEAk-hnrdECJwPkPUQrcV4rINs44LisEEs2HaVL9rqonFysELU7LtT8gFVivleqhXCqqg1mqhrCVEvNKSS15K2WUi6xauURUrQKmtIqpltqMv2hRQ6zkGqkWEh5dYsUzVMS6oFK1yr-p2sFQ67a6UXWTVku6rNqkspaSWr61a61xibUmMGksFUkJVS8uG46kw3LRuap5NqPVOrdWTX1W1fF7WcUdZo1qY1EpupmiNEdC0i0-v6H64YAbjJBspTIPataDpVEwkdFyTbTqMgWcs1Z6zWCbLcbIB5c9BHsBweWIUQTO5UCAhMxRncgIBIqeeh9CiBC-JLHWW9yjynvslI-nxX72z_rfZ-j9IGZA_pXRBjM2YjU0BVl-StVQgA
	请注意，该图表不是 Apache ECharts 官方示例，而是由用户代码生成的。请注意鉴别其内容。
-->
<!DOCTYPE html>
<html lang="zh-CN" style="height: 100%">
<head>
  <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%"></div>

  
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.3.3/dist/echarts.min.js"></script>
  <!-- Uncomment this line if you want to dataTool extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.3.3/dist/extension/dataTool.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use gl extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-stat extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use map
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/china.js"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>
  -->
  <!-- Uncomment these two lines if you want to use bmap extension
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.3.3/dist/extension/bmap.min.js"></script>
  -->

  <script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
      renderer: 'svg',
      useDirtyRect: false
    });
    var app = {};
    
    var option;

    //这是一个产生随机数的函数，相对独立
			function randomData() {//返回的是json格式的数据，name对应横坐标，是时间，value又是一个数组
				now = new Date(+now + oneDay);
				value =value + Math.random() * 10000 - 5000;
				var minute=now.getMinutes()<10?'0'+now.getMinutes():now.getMinutes();
				var second=now.getSeconds()<10?'0'+now.getSeconds():now.getSeconds();
				return {
					name: now.toString(),
					value: [
						[now.getFullYear(), now.getMonth()+1, now.getDate()].join('/')+" "+[now.getHours(),minute-3,second].join(':'),
						Math.round(value)
					]
				}
			}
	
			var data = [];
			var data2 = [];
			var data3 = [];
			var data4 = [];
			var data_test;
			var now = new Date();
			var oneDay = 1000;
//			var twoSecond = 2 * 1000;
			var value = 120000;
			for (var i = 0; i < 100; i++) {
			  var num=randomData()
				data.push(num);//先在其中放1000个数据
				var num2=JSON.parse(JSON.stringify(num))
				num2.value[1]=Math.round(num2.value[1]/2+Math.random() * 20000-10000)
				data2.push(num2);//先在其中放1000个数据
				
				var num3=JSON.parse(JSON.stringify(num))
				num3.value[1]=Math.round(num3.value[1]/2+Math.random() * 20000-10000)
				data3.push(num3);//先在其中放1000个数据
				
				var num4=JSON.parse(JSON.stringify(num))
				num4.value[1]=Math.round(num4.value[1]/2+Math.random() * 20000-10000)
				data4.push(num4);//先在其中放1000个数据
			}
	
			option = {
				title: {
					text: '城市大脑系统性能-吞吐'
				},
				legend: {
				   right:'10%',
          data: ['gaia', 'flink 1.4.2','flink 1.8.0','flink 1.12.2']
        },
        grid: {
          left: '3%',
          right: '4%',
          bottom: '3%',
          containLabel: true
        },
				tooltip: {//这部分与提示框有关，与Y坐标自适应无关
					trigger: 'axis',
					
				},
				xAxis: {
					type: 'time',
					splitLine: {
						show: false
					}
				},
				yAxis: {
					type: 'value',
					boundaryGap: [0, '100%'],
					splitLine: {
						show: true//代表横向分隔线
					}
				},
				series: [
				  {
  					name: 'gaia',
  					type: 'line',
  					showSymbol: false,
  					hoverAnimation: false,
  					data: data
				  },
				  {
  					name: 'flink 1.4.2',
  					type: 'line',
  					showSymbol: false,
  					hoverAnimation: false,
  					data: data2
				  },
				  {
  					name: 'flink 1.8.0',
  					type: 'line',
  					showSymbol: false,
  					hoverAnimation: false,
  					data: data3
				  },
				  {
  					name: 'flink 1.12.2',
  					type: 'line',
  					showSymbol: false,
  					hoverAnimation: false,
  					data: data4
				  }
				]
			};
	
			myChart.setOption(option);
			
			setInterval(function () {
				//只改下面这段代码就行，主要还是修改数据来源函数，把随机产生变成服务器获得
				data.shift();
				data2.shift();
				data3.shift();
				data4.shift();
				data_test=randomData();
//				console.log(JSON.stringify(data_test));
				data.push(data_test);
				var num2=JSON.parse(JSON.stringify(data_test))
				num2.value[1]=Math.round(num2.value[1]/2+Math.random() * 20000-10000)
				data2.push(num2);//先在其中放1000个数据
				
				var num3=JSON.parse(JSON.stringify(data_test))
				num3.value[1]=Math.round(num3.value[1]/2+Math.random() * 20000-10000)
				data3.push(num3);//先在其中放1000个数据
				
				var num4=JSON.parse(JSON.stringify(data_test))
				num4.value[1]=Math.round(num4.value[1]/2+Math.random() * 20000-10000)
				data4.push(num4);//先在其中放1000个数据

				myChart.setOption({
					series: [
					  {
						  data: data
					  },
					  {
						  data: data2
					  },
					  {
						  data: data3
					  },
					  {
						  data: data4
					  }
					]
				});
			}, 1000);

    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
  </script>
</body>
</html>