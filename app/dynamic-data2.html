<!--
	THIS EXAMPLE WAS DOWNLOADED FROM https://echarts.apache.org/examples/zh/editor.html?c=dynamic-data2&random=9wutaah8ym&renderer=svg&code=PTSb8Z6M0ADlCo5RyuUfFdDxaYLnNAOpoELdC_iqwMP-A-3QT-1Abp0GmvAWACgBIGgMwFcA7AYwBcBLAe0YAIAnAIaMAJpwC2AEQGsBACgCUPAN4hAK_GA9tXTgAVgGdugHgtA8PrpUgO2McjAWICmBQCl6gKitACuqBwCxzhAb6aAX1JwA3AQAbehtACeUoaFRAEb9KGhpGTgB3HgBeHkYbZKlWG1kAagTkvJ5uGykAT3kAbli4gOCbVIBZaQALADoxAQAPWXqQnmKW1g7BEXEFHgAqHgAmHgBaHgBGABoANmramgC-HjF2RnoclML2gHMbVibD45tdBQAeZYAGAH4AchePgqSLq5uRxyD3kAC4zpdrrdgQoatQ6gI9robMxuMJTn9IQBlFFokHPd5fH4Qq441EiEHgzGk3EU2HbKh8K70Pi8JQMqhWWyg9J_VicLGsPiHc4KVYc_o2HkAbQ5VGlJNYADF6IFAgBNGyIsW8xL_a7cEY6xXZXLyAC67W0nEOsg-wA-8jyACIeM68grqawABKcFkg1YHIE2VbI8nCS3W20fUGO8XwuJUYajP0iPpBELyDnmhkAX22-eo212PGE0gEqR40vNcIRezLMnmaWrtZ2iNL5YAzJWW8X2w2BAAWHs1vv18sAfWBrFbVBLhUrGSy0jNs5LpQqldeLxecJAdZ4rESAtpwkr8xm293Y54kq314TtE4e3Te3Yld3PHfjxWO6qX7yPJFHZBMeFvdsjjEFIxlESRywUBkB3aAAHehdFaWRIOqEBAAlFQAKdUAN0VAFo5QA-UyvSIzAZed6DEWYUgAKSxAB5AA5FDEWRWRGNY9pdCFEV2FocpMJo-QswTTkaNmdpJWlZZzRSZN2j4VNhBE2iZIzGw5PNKZZjyJSYImRQZkHBZZnkYAr0Q8tpNQ9D1IsqpcMI0jyPMBkqIgmjOwY5i2OQjjcm4ti-OFRhzkE4SsPExNIM7TSGh0xS2mU1T1IS2T5L0gzUqMsRJlM8zLOsiSBwS-yMPi7DgHw4iyJ3F4KM8iTqLEQc_J4wK-E4kLeP4iKovUsSGUgwdEpCZLDPSsaJu07L9MMoRYMKngzIsqzGpsmRxsq9TBxquq3Ma5rQPSGi5p04AUlKuJCyobZOGQjhuErEDEw4VhAilZQORybpWB5D5ADn1QAgPUAck1AERAwBvn0Afb9AHIDQBfgIWTxADe9D483jRNvsuEQeXeuIwP4dhzlaQGPleABSD54yJumiYHGUPnOAR2AEGmeA-WhAkOABrFZ2nG2Yaa5nnGH55Z2gADnab5VlFvmBeWaThZzCh6aJ3NaY1nhzmFYR8coHWie-2hAc5ztqe143hVJ82PkHK2jeNngACNOFYfkxCBy2aed43yRkQ4ABkBFdmxAh5IUQn9-mtYZflOECDhkPxkBQEAC4TADAlQA4OUABeNAC5PQAxC0ASHNAGdFHAc_VNxACvAwAgBPsQAD0zLv7bcuPggZ6dhdD9iSHok-OJO6ABBbpu8NvvWHKZCfo-DhbF7xMqF0ZCedYYPDh-gnE3QpIeVoIJkQ5e67qxuJylH8ffsn6fZ8lRfE3dpgyz4coAHEBFTqsXlWTnt2p80Z84grzXhvDIE8l7L1aHvQ8fAQggEAMdygALCMcIARBUs6ABS0wA_X7H0xgyZEwp7gygZGBECYEl5clnizNmvdyEfVvkDMWNhaE8CXrvRIWJyhiHdpHHgB9AjIm1kvaBfgbB8GHowdgXQXqMH3ofEMzsl6Mw7DIEhPBB6JlIYouK1hZ7c0VpLIWLCl5Txnowzexid7QI4VwnhciBEKPVqwxMIixESKkdILgsi-HyKEYmZRA5ZhqI0YTa-dC4iUKBvo8WAsZZy20XEUxs8mGWOAdYzh3Ck72MEQkmgrjxGSOkV47Jjjwk0ACV2YJQCqBaKcRQ3RUSxYS3aMrdows_GJIYZzFJHSaDsIyXYnxDjelUHye4op3ASkjIqTtYJDI1Z3VrNsMQ5QADCrRESsF4lcJiz0vGyCejIrYCZtjIlYAASUYDkPg9RZAMBYDIngkxt5UBAIAK-VACcpoAaDlABG6aAQArdYIMAIAegBGHUADIROBADccoAQMjAAb8eAQAd_IfPMIAU3NAAJdtgHAgAooxQAgQAG8qAAQjQAsOaAEKlQAFmqAHbgwA6frbQELxVoglWD0jKrZeljLmX-K7Gys2HK4gDnGuhdlxzOUyCnPcVg0FlriGyHIY5-44jkn0N9dogROCij6mFASQlZADjFXxMSs4qBIT2rq6cwqDyQTon1bqvV_L9XCpFbVprxUjQkpay68kUojDSs_RyHrdKLTylKgqJk1rFU2juWldk0JVSkodVyDUdynUTF5PY8VOoBSClxO1mrBpOsnGa2KESfL-q9SmX18V_U5SWuMEN0ww0bVunyrle1qrOVqgm9ylEJKpvOu1DN7EerBRzQNR1wlnX6qLfEGi40soKWmhWmdVbA3evyqtdaJUtosp2ihGN-1431S7bHOmE6tlzuuqVBkKz1mbO2awXZMjZAvOXmI9gRCqwclqZAsCMyBCfvUdUmp19v0qIEDyQJ_6QmhOfUB39nZIOAa_UvH95ZwPlkHJB7MeZzVUC1r-Hc1QgA
	请注意，该图表不是 Apache ECharts 官方示例，而是由用户代码生成的。请注意鉴别其内容。
-->
<!DOCTYPE html>
<html lang="zh-CN" style="height: 100%">
<head>
  <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%"></div>

  
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.3.3/dist/echarts.min.js"></script>
  <!-- Uncomment this line if you want to dataTool extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.3.3/dist/extension/dataTool.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use gl extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>
  -->
  <!-- Uncomment this line if you want to echarts-stat extension
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>
  -->
  <!-- Uncomment this line if you want to use map
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/china.js"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>
  -->
  <!-- Uncomment these two lines if you want to use bmap extension
  <script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
  <script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.3.3/dist/extension/bmap.min.js"></script>
  -->

  <script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
      renderer: 'svg',
      useDirtyRect: false
    });
    var app = {};
    
    var option;

    //这是一个产生随机数的函数，相对独立
			function randomData() {//返回的是json格式的数据，name对应横坐标，是时间，value又是一个数组
				now = new Date(+now + oneDay);
				value =Math.max(value + Math.random() * 2 - 1,6);
				var minute=now.getMinutes()<10?'0'+now.getMinutes():now.getMinutes();
				var second=now.getSeconds()<10?'0'+now.getSeconds():now.getSeconds();
				return {
					name: now.toString(),
					value: [
						[now.getFullYear(), now.getMonth()+1, now.getDate()].join('/')+" "+[now.getHours(),minute-3,second].join(':'),
						Math.round(value)
					]
				}
			}
	
			var data = [];
			var data2 = [];
			var data3 = [];
			var data4 = [];
			var data_test;
			var now = new Date();
			var oneDay = 1000;
//			var twoSecond = 2 * 1000;
			var value = 10;
			for (var i = 0; i < 100; i++) {
			  var num=randomData()
				data.push(num);//先在其中放1000个数据
				var num2=JSON.parse(JSON.stringify(num))
				num2.value[1]=Math.round(num2.value[1]*2+Math.random() * 4-2)/1000
				data2.push(num2);//先在其中放1000个数据
				
				var num3=JSON.parse(JSON.stringify(num))
				num3.value[1]=Math.round(num3.value[1]*2+Math.random() * 4-2)/1000
				data3.push(num3);//先在其中放1000个数据
				
				var num4=JSON.parse(JSON.stringify(num))
				num4.value[1]=Math.round(num4.value[1]*2+Math.random() * 4-2)/1000
				data4.push(num4);//先在其中放1000个数据
			  num.value[1]/=1000
			}
	
			option = {
				title: {
					text: '城市大脑系统性能-时延'
				},
				legend: {
				   right:'10%',
          data: ['gaia', 'flink 1.4.2','flink 1.8.0','flink 1.12.2']
        },
        grid: {
          left: '3%',
          right: '4%',
          bottom: '3%',
          containLabel: true
        },
				tooltip: {//这部分与提示框有关，与Y坐标自适应无关
					trigger: 'axis',
					
				},
				xAxis: {
					type: 'time',
					splitLine: {
						show: false
					}
				},
				yAxis: {
					type: 'value',
					boundaryGap: [0, '100%'],
					splitLine: {
						show: true//代表横向分隔线
					}
				},
				series: [
				  {
  					name: 'gaia',
  					type: 'line',
  					showSymbol: false,
  					hoverAnimation: false,
  					data: data
				  },
				  {
  					name: 'flink 1.4.2',
  					type: 'line',
  					showSymbol: false,
  					hoverAnimation: false,
  					data: data2
				  },
				  {
  					name: 'flink 1.8.0',
  					type: 'line',
  					showSymbol: false,
  					hoverAnimation: false,
  					data: data3
				  },
				  {
  					name: 'flink 1.12.2',
  					type: 'line',
  					showSymbol: false,
  					hoverAnimation: false,
  					data: data4
				  }
				]
			};
	
			myChart.setOption(option);
			
			setInterval(function () {
				//只改下面这段代码就行，主要还是修改数据来源函数，把随机产生变成服务器获得
				data.shift();
				data2.shift();
				data3.shift();
				data4.shift();
				data_test=randomData();
//				console.log(JSON.stringify(data_test));
				data.push(data_test);
				var num2=JSON.parse(JSON.stringify(data_test))
				num2.value[1]=Math.round(num2.value[1]*2+Math.random() * 4-2)/1000
				data2.push(num2);//先在其中放1000个数据
				
				var num3=JSON.parse(JSON.stringify(data_test))
				num3.value[1]=Math.round(num3.value[1]*2+Math.random() * 4-2)/1000
				data3.push(num3);//先在其中放1000个数据
				
				var num4=JSON.parse(JSON.stringify(data_test))
				num4.value[1]=Math.round(num4.value[1]*2+Math.random() * 4-2)/1000
				data4.push(num4);//先在其中放1000个数据
        data_test.value[1]/=1000

				myChart.setOption({
					series: [
					  {
						  data: data
					  },
					  {
						  data: data2
					  },
					  {
						  data: data3
					  },
					  {
						  data: data4
					  }
					]
				});
			}, 1000);

    if (option && typeof option === 'object') {
      myChart.setOption(option);
    }

    window.addEventListener('resize', myChart.resize);
  </script>
</body>
</html>